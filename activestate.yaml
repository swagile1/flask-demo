project: https://platform.activestate.com/shanew/flask-demo?branch=main&commitID=1914027b-de7f-4e28-80e5-ad6bf29440da
constants:
  - name: FLASK_APP
    value: app
  - name: FLASK_ENV
    value: development

scripts:
  - name: startApp
    language: python3
    value: |
      import subprocess
      import time
      import webbrowser
      import signal

      flask_proc = subprocess.Popen(['flask', 'run', '-p', '9000'])
      signal.signal(signal.SIGINT, lambda signum, frame: exit(flask_proc.terminate()))
      time.sleep(2)
      webbrowser.open_new_tab('http://127.0.0.1:9000')

      while True:
        time.sleep(0.1)

  - name: prepDB
    language: bash
    value: sqlite3 db/database.db < db/schema.sql
